
@startuml
' 科研数据表
entity "research_data" as research_data {
    * id : BIGINT <<PK>>
    * experiment_no : VARCHAR(50) <<FK>>
    * model_name : VARCHAR(100)
    * dataset : VARCHAR(100)
    * accuracy : DECIMAL(5,4)
    * precision : DECIMAL(5,4)
    * recall : DECIMAL(5,4)
    * f1_score : DECIMAL(5,4)
    --
    create_time : DATETIME
    update_time : DATETIME
}

' 数据源表
entity "data_source" as data_source {
    * id : BIGINT <<PK>>
    * source_name : VARCHAR(100)
    * source_type : VARCHAR(50)
    * file_path : VARCHAR(255)
    * db_url : VARCHAR(255)
    * db_username : VARCHAR(50)
    * db_password : VARCHAR(50)
    --
    create_time : DATETIME
    update_time : DATETIME
}

' 实验方案表
entity "experiment_plan" as experiment_plan {
    * id : BIGINT <<PK>>
    * plan_name : VARCHAR(100)
    * experiment_no : VARCHAR(50) <<FK>>
    * purpose : TEXT
    * principal : VARCHAR(50)
    * dept : VARCHAR(50)
    * start_time : DATETIME
    * end_time : DATETIME
    * status : TINYINT
    * user_id : BIGINT <<FK>>
    --
    create_time : DATETIME
    update_time : DATETIME
}

' 统计模型表
entity "stat_model" as stat_model {
    * id : BIGINT <<PK>>
    * model_name : VARCHAR(50)
    * model_code : VARCHAR(30) <<UK>>
    * description : TEXT
    * params : JSON
    * status : TINYINT
    * sort : INT
    --
    create_time : DATETIME
    update_time : DATETIME
}

' 分析报告表
entity "analysis_report" as analysis_report {
    * id : BIGINT <<PK>>
    * report_name : VARCHAR(100)
    * plan_id : BIGINT <<FK>>
    * model_id : BIGINT <<FK>>
    * stat_conditions : JSON
    * report_content : LONGTEXT
    * file_url : VARCHAR(255)
    * version : VARCHAR(20)
    * status : TINYINT
    * user_id : BIGINT <<FK>>
    --
    create_time : DATETIME
    update_time : DATETIME
}

' 系统用户表
entity "sys_user" as sys_user {
    * id : BIGINT <<PK>>
    * username : VARCHAR(50) <<UK>>
    * password : VARCHAR(100)
    * real_name : VARCHAR(50)
    * phone : VARCHAR(20)
    * email : VARCHAR(50)
    * status : TINYINT
    * last_login_time : DATETIME
    --
    create_time : DATETIME
    update_time : DATETIME
}

' 系统角色表
entity "sys_role" as sys_role {
    * id : BIGINT <<PK>>
    * role_name : VARCHAR(50)
    * role_code : VARCHAR(30) <<UK>>
    * description : VARCHAR(255)
    --
    create_time : DATETIME
    update_time : DATETIME
}

' 用户角色关联表
entity "sys_user_role" as sys_user_role {
    * id : BIGINT <<PK>>
    * user_id : BIGINT <<FK>>
    * role_id : BIGINT <<FK>>
    --
    create_time : DATETIME
    update_time : DATETIME
}

' 关系定义
research_data::experiment_no --> experiment_plan::experiment_no : 外键关联
experiment_plan::user_id --> sys_user::id : 外键关联
analysis_report::plan_id --> experiment_plan::id : 外键关联
analysis_report::model_id --> stat_model::id : 外键关联
analysis_report::user_id --> sys_user::id : 外键关联
sys_user_role::user_id --> sys_user::id : 外键关联
sys_user_role::role_id --> sys_role::id : 外键关联
@enduml


